(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{807:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),i=t(2115),a=t(63),n=t(3998),l=t(6948),c=t(1647),d=t(1834),o=t(6079),m=t(3583),x=t(5626),g=t(2529),h=t(1360),u=t(2196),j=t(890),p=t(3457),f=t(2619),v=t.n(f),N=t(2663);function b(){let e=(0,a.useParams)(),s=(0,a.useRouter)(),t=e.id,{getFeedbackById:f,toggleVote:b,isVoted:w,deleteFeedback:y,resolveFeedback:I,isLoading:S}=(0,o.j)(),{isLoggedIn:A}=(0,m.z)(),[D,_]=(0,i.useState)(null),[L,z]=(0,i.useState)(!1),[T,C]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(!S){let e=f(t);e?_(e):s.push("/")}},[t,f,s,S]),S||!D)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"로딩 중..."})})});let k=e=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(N.l$,{position:"top-right"}),(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(v(),{href:"/",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,r.jsx)(x.A,{size:20})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"의견 상세"})]})})}),(0,r.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,r.jsx)(l.Zp,{children:(0,r.jsxs)(l.Wu,{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.E,{className:"".concat((e=>{switch(e){case"feedback":return"bg-blue-100 text-blue-800";case"idea":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(D.type)," border-0"),children:(e=>{switch(e){case"feedback":return"피드백";case"idea":return"아이디어";case"error":return"에러";default:return e}})(D.type)}),"resolved"===D.status&&(0,r.jsx)(c.E,{variant:"outline",className:"text-green-600 border-green-600",children:"해결완료"})]}),A&&"active"===D.status&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(d.lG,{open:T,onOpenChange:C,children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"outline",size:"sm",className:"text-green-600 border-green-600 hover:bg-green-50",children:[(0,r.jsx)(g.A,{size:16,className:"mr-1"}),"해결완료"]})}),(0,r.jsxs)(d.Cf,{children:[(0,r.jsx)(d.c7,{children:(0,r.jsx)(d.L3,{children:"해결완료 처리"})}),(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsx)("p",{children:"이 의견을 해결완료로 처리하시겠습니까?"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"해결완료된 의견은 '해결완료' 탭으로 이동됩니다."})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>C(!1),children:"취소"}),(0,r.jsx)(n.$,{onClick:()=>{I(D.id),_(e=>e?{...e,status:"resolved",updatedAt:new Date}:null),N.Ay.success("의견이 해결 완료로 처리되었습니다"),C(!1)},className:"bg-green-600 hover:bg-green-700",children:"해결완료 처리"})]})]})]}),(0,r.jsxs)(d.lG,{open:L,onOpenChange:z,children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",children:[(0,r.jsx)(h.A,{size:16,className:"mr-1"}),"삭제"]})}),(0,r.jsxs)(d.Cf,{children:[(0,r.jsx)(d.c7,{children:(0,r.jsx)(d.L3,{children:"의견 삭제"})}),(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsx)("p",{children:"정말로 이 의견을 삭제하시겠습니까?"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"삭제된 의견은 복구할 수 없습니다."})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>z(!1),children:"취소"}),(0,r.jsx)(n.$,{variant:"destructive",onClick:()=>{y(D.id),N.Ay.success("의견이 삭제되었습니다"),z(!1),s.push("/")},children:"삭제"})]})]})]})]})]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:D.title}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-gray-500 mb-6 md:flex-row md:items-center md:gap-4",children:[(0,r.jsxs)("span",{children:["작성자: ",D.author]}),(0,r.jsxs)("span",{children:["작성일: ",k(D.createdAt)]}),"resolved"===D.status&&(0,r.jsxs)("span",{children:["해결일: ",k(D.updatedAt)]})]}),(0,r.jsx)("div",{className:"prose max-w-none mb-8",children:(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:D.content})}),D.files&&D.files.length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"첨부파일"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.files.map((e,s)=>(0,r.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["image"===e.type?(0,r.jsx)(u.A,{size:24,className:"text-blue-500"}):(0,r.jsx)(j.A,{size:24,className:"text-green-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.mimeType})]})]})},s))})]}),(0,r.jsx)("div",{className:"border-t pt-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(n.$,{variant:w(D.id)?"default":"outline",size:"sm",onClick:()=>b(D.id),className:"flex items-center gap-1 transition-all duration-200 hover:scale-105 active:scale-95 ".concat(w(D.id)?"bg-red-500 hover:bg-red-600 border-red-500":"hover:border-red-300 hover:text-red-600"),children:[(0,r.jsx)(p.A,{size:16,className:"transition-all duration-200 ".concat(w(D.id)?"fill-current animate-pulse":"hover:fill-red-200")}),(0,r.jsx)("span",{className:"font-medium",children:D.votes})]}),(0,r.jsx)(v(),{href:"/",children:(0,r.jsxs)(n.$,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,r.jsx)(x.A,{size:16}),"목록"]})})]})})]})})})]})}},2500:(e,s,t)=>{Promise.resolve().then(t.bind(t,807))},3583:(e,s,t)=>{"use strict";t.d(s,{z:()=>a});var r=t(2115),i=t(9475);function a(){let[e,s]=(0,r.useState)({isLoggedIn:!1,loginTime:new Date,expiresAt:new Date}),[t,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("reportvoice_admin_session");if(e){let t=JSON.parse(e),r=new Date(t.expiresAt),i=new Date(t.loginTime);t.isLoggedIn&&new Date<r?s({isLoggedIn:!0,loginTime:i,expiresAt:r}):(localStorage.removeItem("reportvoice_admin_session"),s({isLoggedIn:!1,loginTime:new Date,expiresAt:new Date}))}}catch(e){console.error("세션 확인 실패:",e),localStorage.removeItem("reportvoice_admin_session"),s({isLoggedIn:!1,loginTime:new Date,expiresAt:new Date})}finally{a(!1)}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]);let n=async(e,t)=>{if(e!==i.H9.username||t!==i.H9.password)return!1;let r=new Date,a=new Date(r.getTime()+6048e5);return localStorage.setItem("reportvoice_admin_session",JSON.stringify({isLoggedIn:!0,loginTime:r.toISOString(),expiresAt:a.toISOString()})),s({isLoggedIn:!0,loginTime:r,expiresAt:a}),!0},l=()=>e.isLoggedIn?Math.max(0,e.expiresAt.getTime()-new Date().getTime()):0;return{session:e,isLoading:t,isLoggedIn:e.isLoggedIn,login:n,logout:()=>{localStorage.removeItem("reportvoice_admin_session"),s({isLoggedIn:!1,loginTime:new Date,expiresAt:new Date})},extendSession:()=>{if(!e.isLoggedIn)return!1;let t=new Date(Date.now()+6048e5),r={...e,expiresAt:t};return localStorage.setItem("reportvoice_admin_session",JSON.stringify({isLoggedIn:!0,loginTime:e.loginTime.toISOString(),expiresAt:t.toISOString()})),s(r),!0},isValidSession:()=>e.isLoggedIn&&new Date<e.expiresAt,getTimeRemaining:l,getTimeRemainingFormatted:()=>{let e=l();if(e<=0)return"만료됨";let s=Math.floor(e/864e5),t=Math.floor(e%864e5/36e5),r=Math.floor(e%36e5/6e4);return s>0?"".concat(s,"일 ").concat(t,"시간"):t>0?"".concat(t,"시간 ").concat(r,"분"):"".concat(r,"분")}}}}},e=>{e.O(0,[5,896,294,344,441,255,358],()=>e(e.s=2500)),_N_E=e.O()}]);